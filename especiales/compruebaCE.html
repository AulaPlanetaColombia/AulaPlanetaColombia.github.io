<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/png" href="../favicon.png"><!-- Major Browsers -->
        <!--[if IE]><link rel="SHORTCUT ICON" href="favicon.ico"/><![endif]--><!-- Internet Explorer-->
        <title>aulaPlaneta Colombia</title>

        <!-- Bootstrap -->
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        <div class="container">
            <form>
                <div class="form-group">
                    <label for="cont">Contenido de cuadernoestudio.xml</label>
                    <textarea id="cont" class="form-control" rows="10"></textarea>
                </div>
                <button class="btn btn-primary btn-block" type="submit">Procesar</button>
            </form>
            <div id="respuesta"></div>
        </div><!-- /.container -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../js/bootstrap.min.js"></script>
        <script>
            $('form').submit(function(e){
                e.preventDefault();
                // Usando RegEx según https://regex101.com/r/vF5cS9/3
                var reg = /(<enlace(\W| )destino=")(\/LoIdRedirect\.aspx\?LoId=)([A-Z]{2}_[0-9]{2}_[0-9]{2}_[A-Z]{2}_Recurso[0-9]{3})(&amp;)(IdRecurso=)(RES-\w+)("?\W?"?>)(.+)(<\/enlace>)/g;
                var matches = $('#cont').val().match(reg);
                var salida = '<table><thead><tr><th>LoID</th><th>RES</th><th>Título</th></thead><tbody>';
                matches.forEach(function(val, index) {
                    salida += '<tr><td>'+val.replace(reg,'$4')+'</td><td>'+val.replace(reg,'$7')+'</td><td>'+val.replace(reg,'$9')+'</td></tr>';
                });
                salida += '</tbody></table>';
                $('#respuesta').html(salida);
            });
        </script>
    </body>
</html>
